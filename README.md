# SLATE - Simplified Blockchain Assistant

A clean, production-ready AI assistant for TRON wallet management and JustLend DeFi operations.

## 🎯 Overview

SLATE is a simplified blockchain assistant that helps users interact with their TRON wallets and JustLend DeFi protocol through natural conversation. All responses are generated by AI with no template messages.

### Key Features
- **Simple Chat Interface**: Natural language interaction with blockchain operations
- **6 Core Tools**: Complete wallet and DeFi operations support
- **LangChain Memory**: Advanced conversation context management
- **No Template Messages**: All responses generated by LLM for natural conversation
- **No Data Storage**: Wallet information never stored for maximum security
- **Modular Architecture**: Clean, maintainable codebase ready for deployment

## 🛠️ Tools Available

### Wallet Tools (Frontend)
- **wallet_check_tronlink**: Check if TronLink extension is installed and available
- **wallet_connect**: Connect to TronLink wallet
- **wallet_fetch_balance**: Fetch wallet balance and account details

### DeFi Tools (Backend)  
- **trustlender_list_markets**: List JustLend markets with APY data
- **trustlender_market_detail**: Get detailed information for specific markets
- **trustlender_user_position**: Get user's lending positions and liquidity

## 🚀 Quick Start

### Prerequisites
- Node.js 16+ and npm
- Python 3.9+ and pip
- TronLink browser extension
- OpenAI API key

### Backend Setup

1. **Navigate to backend directory**
   ```bash
   cd backend
   ```

2. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```
   Or manually:
```bash
   pip install fastapi uvicorn openai tronpy python-dotenv pydantic langchain langchain-core
```

3. **Environment setup** - Create `.env` file:
```env
   OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-4o-mini
   TRON_NETWORK=mainnet
   TRONGRID_API_KEY=your_trongrid_api_key
   JL_UNITROLLER_NILE=your_nile_contract_address
   ```

4. **Start backend server**
   ```bash
   python main.py
   ```
   Server runs on `http://localhost:8000`

### Frontend Setup

1. **Navigate to frontend directory**
```bash
   cd ../
```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Start development server**
```bash
npm run dev
```
   Frontend runs on `http://localhost:5173`

## 📁 Project Structure

```
slate/
├── backend/
│   ├── main.py              # FastAPI app with routes and config
│   ├── models.py            # Pydantic models for API contracts
│   ├── tron_client.py       # TRON network client and utilities
│   ├── justlend_ops.py      # JustLend protocol operations
│   └── llm_planner.py       # LLM planning and memory management
└── src/
    ├── components/          # React components
    ├── functions/           # Tool handlers
    ├── pages/               # Main pages
    └── widgets/             # UI widgets for different states
```

## 🔧 Configuration

### Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `OPENAI_API_KEY` | Yes | OpenAI API key for LLM operations |
| `OPENAI_MODEL` | No | Model to use (default: gpt-4o-mini) |
| `TRON_NETWORK` | No | Network: mainnet/nile (default: mainnet) |
| `TRONGRID_API_KEY` | Yes* | Required for mainnet operations |
| `JL_UNITROLLER_NILE` | Yes* | Required for nile network testing |

*Required based on network selection

## 🔄 How It Works

1. **User Input**: User types natural language question
2. **LLM Planning**: AI analyzes intent using LangChain and selects appropriate tools
3. **Tool Execution**: 
   - Backend tools execute immediately (JustLend operations: `trustlender_*`)
   - Frontend tools queued for browser execution (wallet operations: `wallet_*`)
4. **AI Response**: LLM generates natural, context-aware response using conversation memory
5. **LangChain Memory**: Conversation context stored using LangChain ConversationBufferWindowMemory

## 🎮 Example Interactions

| User Input | Tool Chain | Result |
|------------|------------|---------|
| "Do I have TronLink installed?" | `wallet_check_tronlink` | Checks extension availability |
| "Connect my wallet" | `wallet_check_tronlink` → `wallet_connect` | Initiates wallet connection |
| "What's my TRX balance?" | `wallet_check_tronlink` → `wallet_connect` → `wallet_fetch_balance` | Fetches and displays balance |
| "List JustLend markets" | `trustlender_list_markets` | Shows market data with APY |
| "Show details for JUSDT market" | `trustlender_market_detail(symbol=JUSDT)` | Detailed market information |
| "What's my position?" | `trustlender_user_position(address=...)` | User's lending positions |

```
User: "Connect my wallet"
→ LLM plans: wallet_check_tronlink → wallet_connect
→ Executes tools, summarizes result naturally

User: "What's my TRX balance?"  
→ LLM plans: wallet_check_tronlink → wallet_connect → wallet_fetch_balance
→ Fetches balance, AI explains result with context

User: "Show me 6 JustLend markets"
→ LLM plans: trustlender_list_markets(limit=6)
→ Backend fetches data, displays in widget, AI explains APY rates

User: "What's my lending position for TXxx...?"
→ LLM plans: trustlender_user_position(address=TXxx...)
→ Gets position data, AI explains liquidity and positions
```

## 🚨 Areas to Watch

### For Development
- **API Rate Limits**: OpenAI and TronGrid have rate limits
- **LangChain Memory**: In-memory conversation storage (consider Redis for production)
- **No Wallet Storage**: Wallet data never persisted (security by design)
- **Error Handling**: All tool failures gracefully handled by LLM
- **CORS Settings**: Configured for development ports

### For Production  
- **Environment Security**: Store API keys securely
- **Memory Persistence**: Consider Redis for LangChain memory persistence
- **Monitoring**: Add logging and health check monitoring
- **Rate Limiting**: Implement user rate limiting
- **Wallet Security**: Never store private keys or wallet data - TronLink only
- **LangChain Scaling**: Consider LangChain memory backends for scale

## 🔮 Future Enhancements

- **Additional DeFi Protocols**: Expand beyond JustLend
- **Advanced Analytics**: Portfolio tracking and analysis
- **Mobile Support**: React Native version
- **Multi-Chain**: Support for other blockchains
- **Voice Interface**: Speech-to-text integration
- **Notifications**: Real-time updates and alerts

## 📜 License

MIT License - See LICENSE file for details

## 🤝 Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Open Pull Request

---

**⚠️ Disclaimer**: This software is for educational purposes. Always verify transactions before signing. Not financial advice.